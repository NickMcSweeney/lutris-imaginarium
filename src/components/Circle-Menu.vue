<template>
  <div class="content" :class="{'show-menu': showMenu}">

    <svg id="svg" @click="toggleMenu" width="104px" align="center" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <g id="Page-1" align-items="center" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="other-stuff" transform="translate(-208.000000, -236.000000)">
                <g id="graph-tree-circle" transform="translate(109.000000, 218.000000)">
                    <g class="draw-lines" id="tree" transform="translate(-2.000000, 74.000000)" stroke="#291E2E" stroke-width="2" stroke-linecap="round">
                        <path d="M155.5,52.5 L155.5,86.5" id="L0"></path>
                    </g>
                    <g id="circle-thing" transform="translate(82.000000, 0.000000)">
                        <g id="brokenCircle" transform="translate(19.000000, 20.000000)" stroke="#291E2E" stroke-width="3" stroke-linecap="round">
                            <path d="M57.6947408,99.4115613 C76.6399392,96.4852512 92.0737599,82.9238716 97.7051964,65.018429" id="Oval-2"></path>
                            <path d="M25.8327744,100 C34.5982508,100 42.83691,97.7444273 50,93.7820338" id="Oval-2-Copy" transform="translate(37.916387, 96.891017) scale(-1, 1) translate(-37.916387, -96.891017) "></path>
                            <path d="M11.5266358,88.7746105 C14.0426829,86.7235638 16.3553282,84.4325047 18.4296604,81.9363441" id="Oval-2-Copy" transform="translate(14.978148, 85.355477) scale(-1, 1) translate(-14.978148, -85.355477) "></path>
                            <path d="M0.31896796,73.7989365 C3.30090077,68.2995265 5.28151707,62.1780496 6.01625953,55.6790632" id="Oval-2-Copy" transform="translate(3.167614, 64.739000) scale(-1, 1) translate(-3.167614, -64.739000) "></path>
                            <path d="M100,29.786967 C97.2650306,35.9676235 95.7458907,42.8064047 95.7458907,50" id="Oval-2-Copy-2" transform="translate(97.872945, 39.893483) scale(-1, 1) translate(-97.872945, -39.893483) "></path>
                            <path d="M91.4881306,0.369713825 C76.7649672,2.16387798 64.0173861,10.3575623 56.1111104,22.0850436" id="Oval-2-Copy-4" transform="translate(73.799621, 11.227379) scale(-1, 1) translate(-73.799621, -11.227379) "></path>
                            <path d="M50,0 C46.1353837,0 42.3731725,0.438448458 38.7603957,1.26831606" id="Oval-2-Copy-3"></path>
                            <path d="M33.0096466,2.96076473 C25.394982,5.71164751 18.6395462,10.2588984 13.2550117,16.0908447 C8.17262529,21.595537 4.31160331,28.2447909 2.10222548,35.6083269" id="Oval-2-Copy-3"></path>
                            <path d="M0.526876482,42.7150893 C0.179740186,45.0931829 0,47.5256012 0,50" id="Oval-2-Copy-3"></path>
                        </g>
                        <g id="little-circles" transform="translate(27.000000, 28.000000)" fill="#291E2E">
                            <g id="0deg">
                                <circle id="Oval-5" cx="83" cy="42" r="1"></circle>
                                <circle id="Oval-5" cx="1" cy="42" r="1"></circle>
                                <ellipse id="Oval-5" cx="42" cy="0.989361702" rx="1" ry="1"></ellipse>
                                <ellipse id="Oval-5" cx="42" cy="82.9893617" rx="1" ry="1"></ellipse>
                            </g>
                            <g id="15deg" transform="translate(42.000000, 42.000000) rotate(15.000000) translate(-42.000000, -42.000000) ">
                                <circle id="Oval-5" cx="83" cy="42" r="1"></circle>
                                <circle id="Oval-5" cx="1" cy="42" r="1"></circle>
                                <ellipse id="Oval-5" cx="42" cy="0.989361702" rx="1" ry="1"></ellipse>
                                <ellipse id="Oval-5" cx="42" cy="82.9893617" rx="1" ry="1"></ellipse>
                            </g>
                            <g id="30deg" transform="translate(42.000000, 42.000000) rotate(30.000000) translate(-42.000000, -42.000000) ">
                                <circle id="Oval-5" cx="83" cy="42" r="1"></circle>
                                <circle id="Oval-5" cx="1" cy="42" r="1"></circle>
                                <ellipse id="Oval-5" cx="42" cy="0.989361702" rx="1" ry="1"></ellipse>
                                <ellipse id="Oval-5" cx="42" cy="82.9893617" rx="1" ry="1"></ellipse>
                            </g>
                            <g id="45deg" transform="translate(42.000000, 42.000000) rotate(45.000000) translate(-42.000000, -42.000000) ">
                                <circle id="Oval-5" cx="83" cy="42" r="1"></circle>
                                <circle id="Oval-5" cx="1" cy="42" r="1"></circle>
                                <ellipse id="Oval-5" cx="42" cy="0.989361702" rx="1" ry="1"></ellipse>
                                <ellipse id="Oval-5" cx="42" cy="82.9893617" rx="1" ry="1"></ellipse>
                            </g>
                            <g id="60deg" transform="translate(42.000000, 42.000000) rotate(60.000000) translate(-42.000000, -42.000000) ">
                                <circle id="Oval-5" cx="83" cy="42" r="1"></circle>
                                <circle id="Oval-5" cx="1" cy="42" r="1"></circle>
                                <ellipse id="Oval-5" cx="42" cy="0.989361702" rx="1" ry="1"></ellipse>
                                <ellipse id="Oval-5" cx="42" cy="82.9893617" rx="1" ry="1"></ellipse>
                            </g>
                            <g id="75deg" transform="translate(42.000000, 42.000000) rotate(75.000000) translate(-42.000000, -42.000000) ">
                                <circle id="Oval-5" cx="83" cy="42" r="1"></circle>
                                <circle id="Oval-5" cx="1" cy="42" r="1"></circle>
                                <ellipse id="Oval-5" cx="42" cy="0.989361702" rx="1" ry="1"></ellipse>
                                <ellipse id="Oval-5" cx="42" cy="82.9893617" rx="1" ry="1"></ellipse>
                            </g>
                        </g>
                        <g id="Group-3" transform="translate(32.000000, 33.000000)">
                            <circle id="Oval-4" fill="#291E2E" cx="37.0526316" cy="37.0526316" r="25.0526316"></circle>
                            <circle id="Oval" stroke="#42525A" stroke-width="5" cx="37" cy="37" r="28"></circle>
                            <circle id="Oval-6" stroke="#253E6D" cx="37.5" cy="37.5" r="37.5"></circle>
                        </g>
                    </g>
                </g>
            </g>
        </g>
    </svg>
    <transition name="fade" mode="out-in">
      <h6 v-if="showMenu" @click="selectItem"  v-for="item in menuItem" class="blog-menu"><strong>[</strong> {{ item }} <strong>]</strong></h6>
      <h5 v-else class="blog-menu">{  Welcome to my blog  }</h5>
    </transition>
  </div>
</template>

<script>
export default {
  name: "circle-menu",
  data() {
    return {
      showMenu: false,
    };
  },
  props: {
    menuItem: {
      required: true,
    },
  },
  methods: {
    selectItem(event) {
      this.toggleMenu();
      if (this.showMenu) this.$emit("clear");
      else this.$emit("menuSelect", event.target.innerText);
    },
    toggleMenu() {
      if (this.showMenu) this.erase();
      else this.draw();
      this.showMenu = !this.showMenu;
    },
    draw() {
      var path = document.getElementById("L0");
      var length = path.getTotalLength();
      // Clear any previous transition
      path.style.transition = path.style.WebkitTransition = "none";
      // Set up the starting positions
      path.style.strokeDasharray = length + " " + length;
      path.style.strokeDashoffset = length;
      // Trigger a layout so styles are calculated & the browser
      // picks up the starting position before animating
      path.getBoundingClientRect();
      // Define our transition
      path.style.transition = path.style.WebkitTransition =
        "stroke-dashoffset 1.5s ease-in-out";
      // Go!
      path.style.strokeDashoffset = "0";
    },
    erase() {
      var path = document.getElementById("L0");
      var length = path.getTotalLength();
      // Clear any previous transition
      path.style.transition = path.style.WebkitTransition = "none";
      // Set up the starting positions
      path.style.strokeDasharray = length + " " + length;
      path.style.strokeDashoffset = "0";
      // Trigger a layout so styles are calculated & the browser
      // picks up the starting position before animating
      path.getBoundingClientRect();
      // Define our transition
      path.style.transition = path.style.WebkitTransition =
        "stroke-dashoffset 1.5s ease-in-out";
      // Go!
      path.style.strokeDashoffset = length;
    },
  },
  mounted() {
    this.toggleMenu();
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style lang="stylus" scoped>
.content
  width: 40rem
  height: auto
  padding: 0 2rem
  display: flex
  justify-content: flex-start
  align-items: center
  flex-direction: column
  transition: 1s ease
  transition-delay: .25s
  #tree path
    stroke-dashoffset: 1000
    stroke-dasharray: 1000
  #svg
    height: auto
    background-color: rgba(0,0,0,0)
    cursor: pointer
.show-menu
  height: auto
  #svg
    background-color: rgba(0,0,0,0)
    height: auto
.blog-menu
  background-color: rgba(0,0,0,0)
h5
  margin: 0
  font-size: 1rem
h6
  margin: 0
  font-size: .78rem
  font-weight: 500
  cursor: pointer

.fade-enter-active, .fade-leave-active
  opacity: 1
  transition: opacity .6s ease-in-out
.fade-enter, .fade-leave-active
  opacity: 0
.fade-enter, .fade-enter-active
  background-color: rgba(0,0,0,0)
  transition-delay: 1s
.fade-leave-active, .fade-leave
  background-color: rgba(0,0,0,0)
  transition-delay: .05s
</style>
